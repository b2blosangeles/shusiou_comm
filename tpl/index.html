<!DOCTYPE html>
<html>
<head>
    <title>加密语言通信{($room)?$room:''}</title>
	<meta charset="utf-8" />
	
	<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css" rel="stylesheet">
	<script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/1.7.3/socket.io.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/annyang/2.6.1/annyang.min.js"></script>	
	<script>
	if (annyang) {
	  // Let's define our first command. First the text we expect, and then the function it should call
	  var commands = {
	    'good': function() {
	      alert('good job');
	    }
	  };

	  // Add our commands to annyang
	  annyang.addCommands(commands);

	  // Start listening. You can call this here, or attach this call to an event, button, etc.
	  annyang.start();
	}
	</script>
	<script src="/js/qna.js"></script>
	<script>	
		let qna = new _QNA_();
		qna.init({ 
			master_socket_id: '{$socket}', 
			link : 'https://comm1.service.dev.shusiou.win/', 
			proxy: ['http://comm1.service.dev.shusiou.win/', 'https://comm1.service.dev.shusiou.win/'],
			onConnect : function(socket) {
				qna.sendToServer({niu:
						  function() {
						  	alert('I am ready');
						  }.toString()
				});
			}, 			
			onClientData : function(incomeData, socket) {
				switch (incomeData.cmd) {
					case 'start' :	
						document.getElementById('income_info').innerHTML =  'start';
						break
					default:	
				}
			},
			afterTimeout : function() {
				window.close();
			}
		});
	</script>
	
</head>
<body style="text-align:center">
	加密语言通信<br/><br/>
	<i class="fa fa-microphone" aria-hidden="true" style="font-size:5em; color:darkgreen"></i><br/><br/>
	<div id="income_info" style="font-size:0.6em; color:darkred"></div>
</body>
</html>
